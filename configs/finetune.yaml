# Fine-tuning configuration for HViT on SAR-CLD-2024
# Cotton leaf disease classification

data:
  root_dir: "/path/to/sarcld2024"
  img_size: [256, 256]
  num_classes: 7
  num_workers: 4

model:
  ssl_pretrained_path: null  # Path to SSL checkpoint, set via --ssl-checkpoint
  patch_size: 16
  embed_dim_rgb: 96
  embed_dim_spectral: 96
  spectral_channels: 0
  depths: [2, 2, 6, 2]
  num_heads: [3, 6, 12, 24]
  mlp_ratio: 4.0
  qkv_bias: true
  model_drop_rate: 0.1
  attn_drop_rate: 0.0
  drop_path_rate: 0.2
  norm_layer_name: "LayerNorm"
  use_dfca: true
  use_gradient_checkpointing: false
  ssl_enable_mae: false
  ssl_enable_contrastive: false
  enable_consistency_loss_heads: false

training:
  epochs: 100
  batch_size: 32
  val_batch_size: 64
  learning_rate: 0.0001
  weight_decay: 0.01
  warmup_epochs: 5
  gradient_accumulation_steps: 2
  
  # Advanced training features
  use_ema: true
  ema_decay: 0.9999
  use_tta: true
  use_mixup: true
  mixup_alpha: 0.8
  use_cutmix: true
  cutmix_alpha: 1.0

  # Loss configuration
  loss_type: "combined"  # focal, cross_entropy, or combined
  focal_gamma: 2.0
  label_smoothing: 0.1

augmentations:
  severity: "moderate"  # light, moderate, aggressive

validation:
  frequency: 1
  save_best: true
  early_stopping:
    enabled: true
    patience: 15
    min_delta: 0.001

logging:
  tensorboard: true
  log_dir: "outputs/finetune/logs"
  save_frequency: 5
